# nvidia-xconfig: X configuration file generated by nvidia-xconfig
# nvidia-xconfig:  version 440.44
Section "Files"
    ModulePath "/usr/lib/xorg/modules"
    ModulePath "/usr/lib/nvidia/xorg"
EndSection

Section "ServerLayout"
    Identifier     "layout"
    Screen      0  "iGPU"	
    Option "AllowNVIDIAGPUScreens"
    InputDevice    "Keyboard0" "CoreKeyboard"
    InputDevice    "Mouse0" "CorePointer"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/psaux"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
    

EndSection

#Section "Monitor"
#    Identifier     "Monitor0"
#    VendorName     "Unknown"
#    ModelName      "Unknown"
#    Option         "DPMS"
#EndSection

Section "Device"
	Identifier "iGPU"
	Driver "modesetting"
	BusID "PCI:0:2:0"
#	Option "TearFree" "true"
#	Option "PrimaryGPU" "yes"
#	Option "AccelMethod" "None"
#	Option "DRI" "3"
EndSection

Section "Screen"
    Identifier     "iGPU"
    Device         "iGPU"
EndSection

Section "Device"
	Identifier "nvidia"
	Driver "nvidia"
	BusID "PCI:1:0:0"
	VendorName "NVIDIA Corporation"
	BoardName "GeForce 940MX"
	Option "RegistryDwords" "PerfLevelSrc=0x2222"
	Option "TripleBuffer" "False"
	Option "AllowFlipping" "False"
	Option "AllowEmptyInitialConfiguration"
EndSection


#Section "OutputClass"
#    Identifier "iGPU"
#    MatchDriver "i915"
#    Driver "modesetting"
#    Option "PrimaryGPU" "yes"
#EndSection

#Section "OutputClass"
#    Identifier "dGPU"
#    MatchDriver "nvidia"
#    Driver "nvidia-drm"
#   Option "PrimaryGPU" "yes"
#    ModulePath "/usr/lib/nvidia/xorg"
#    ModulePath "/usr/lib/xorg/modules"
#EndSection

