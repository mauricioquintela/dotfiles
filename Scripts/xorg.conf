# nvidia-xconfig: X configuration file generated by nvidia-xconfig
# nvidia-xconfig:  version 440.44
Section "Files"
    ModulePath "/usr/lib/xorg/modules"
    ModulePath "/usr/lib/nvidia/xorg"
EndSection

Section "ServerLayout"
    Identifier     "layout"
    Screen      0  "iGPU"	
    Option "AllowNVIDIAGPUScreens"
    InputDevice    "Keyboard0" "CoreKeyboard"
    InputDevice    "Mouse0" "CorePointer"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/psaux"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
    

EndSection

Section "Monitor"
	Identifier     "Monitor0"
	VendorName     "Unknown"
	ModelName      "Unknown"
	Option         "DPMS" "true"
	Option	       "DPI" "91x91"
	Modeline "1366x768_60.00"   85.25  1368 1440 1576 1784  768 771 781 798 -hsync +vsync
	Option "PreferredMode" "1366x768_60.00"
EndSection

Section "Device"
	Identifier "iGPU"
	Driver "modesetting"
	BusID "PCI:0:2:0"
	Option "TearFree" "true"
	Option "PrimaryGPU" "yes"
#	Option "AccelMethod" "None"
	Option "DRI" "3"
EndSection

Section "Screen"
	Identifier     "iGPU"
	Device         "iGPU"
#	Monitor        "Monitor0"
	DefaultDepth 24
	SubSection "Display"
		Modes "1366x768_60.00"
	EndSubSection
	Option "DPMS" "true"
	Option "DPI" "104 x 104"
EndSection

Section "Device"
	Identifier "nvidia"
	Driver "nvidia"
	BusID "PCI:1:0:0"
	VendorName "NVIDIA Corporation"
	BoardName "GeForce 940MX"
#	Option "RegistryDwords" "PerfLevelSrc=0x2222"
	Option "Coolbits" "28"
	Option "ConnectedMonitor" "DFP"
	Option "NoLogo" "true"
	Option "TripleBuffer" "False"
	Option "AllowFlipping" "False"
	Option "AllowEmptyInitialConfiguration"
EndSection


#Section "OutputClass"
#    Identifier "iGPU"
#    MatchDriver "i915"
#    Driver "modesetting"
#    Option "PrimaryGPU" "yes"
#EndSection

#Section "OutputClass"
#    Identifier "dGPU"
#    MatchDriver "nvidia"
#    Driver "nvidia-drm"
#   Option "PrimaryGPU" "yes"
#    ModulePath "/usr/lib/nvidia/xorg"
#    ModulePath "/usr/lib/xorg/modules"
#EndSection

